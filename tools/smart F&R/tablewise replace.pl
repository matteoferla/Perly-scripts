print "SCRIPT INCOMPLETE\n";
$text="((((224324,608538)436114),(((438753,176299)272947),(407148,387092),(290398(511145,99287),(58051,357804),(208964,259536)272843)267608),(525909((290399(196627(561304,757418))266940)206672)521003(469383,266117)),(441768(272635,565575)),((224326,243276)355276),((((224308,420246,221109)158879),(321967,299768)),(272562((246194,580331)309798))),((226186,518766)517418),(324602,243164),((497964,481448),(115713,765952)313628),(469381,525903),((243230,649638),((504728,526227),(498848,300852)))309799,445932(381764,521045,403833,484019(243274,390874)),(190304,523794,519441,526218)379066(330214,289376),(103690,1148),(521674,243090),(653733,447454,525904)),((439481,224325(64091,362976,348780),((((188937,192952)259564,547558)349307)456442),(419665,243232)190192(420247,187420),((272844,186497,70601)593117),(273075,273116)),(((272557,453591,399550)415426)666510(399549,273057),(178306,368408)),(414004,436308)374847,228908))";

open(IN,'table.txt') 	or die "Bummer, can't open file: $!";
#open(TARGET,'file.txt') 	or die "Bummer, can't open file: $!";
#open(OUT,'>table_out.txt') 	or die "Can't open file: $!";
print "Hello World\n";

@line=<IN>;
chomp(@line);
if ($#line<2) {
	@temp=split(/\r/,$line[0]);
	@tempo=split(/\r/,$line[1]); #pretty sure cannot be.
	@line=@temp;
	push(@line,@tempo);
}
foreach (@line) {
	@temp=split /\t/;
	$palette{$temp[0]}=$temp[1];
}
@text=<TARGET>;

foreach $m (keys %palette) {
	foreach $n (keys %palette) {
		if (($m=~ /$n/)&&($n ne $m)) {die "$n is contained in $m";}
	}
}


#foreach $m (@text) {
	for $n (keys %palette) {
		$palette{$n} =~ m/(\w)\w+ (\w+).*/;
		$m=lc("$1\.$2");
		$text=~s/$n/$m/g;
	}
#}
print $text."\n";



__END__
@tag=($text=~ m/([\w\s\.\-]+)/g);
print "There are ".($#tag+1)." species on this tree\n";
foreach $n (@tag) {
	$n =~ m/(\w)\w+ (\w+).*/;
	$m=lc("$1\.$2");
	$text=~ s/$n/$m/g;
}

